<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Acceso</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
  background:
    linear-gradient(rgba(0,0,0,.6), rgba(0,0,0,.6)),
    url("https://images.unsplash.com/photo-1506157786151-b8491531f063?q=80&w=1920&auto=format&fit=crop") 
    center/cover no-repeat;
}

.overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}

.box{
  background: rgba(0,0,0,0.7);
  border: 15px solid white;
  padding: 50px 60px;
  text-align:center;
  box-shadow: 
    0 0 25px #ffffff,
    0 0 60px rgba(255,255,255,0.8);
}

h1{
  color:white;
  font-size:48px;
  margin-bottom:25px;
  letter-spacing:4px;
  text-shadow:0 0 10px #fff, 0 0 25px #fff;
}

input{
  font-size:26px;
  padding:12px 15px;
  width:260px;
  text-align:center;
  font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
  border:none;
  outline:none;
  background:black;
  color:white;
  box-shadow: inset 0 0 10px #000, 0 0 10px #fff;
}

button{
  margin-top:20px;
  padding:10px 30px;
  font-size:22px;
  cursor:pointer;
  background:black;
  color:white;
  border:2px solid white;
  letter-spacing:3px;
  box-shadow:0 0 10px #fff,0 0 25px #fff;
}

#error{
  color:#ff4c4c;
  margin-top:15px;
  font-size:18px;
  display:none;
  text-shadow:0 0 10px red;
}
</style>
</head>

<body>

<div class="overlay">
  <div class="box">
    <h1>INGRESA TU CÓDIGO</h1>
    <input id="codeInput" placeholder="CÓDIGO">
    <br>
    <button onclick="checkCode()">ENTRAR</button>
    <div id="error">CÓDIGO INVÁLIDO</div>
  </div>
</div>

<script>
async function checkCode(){
  const input = document.getElementById("codeInput").value.trim().toUpperCase();
  const error = document.getElementById("error");

  const res = await fetch("codes.json");
  const data = await res.json();

  const valid = data.codes.find(p => p.code === input);

  if(valid){
    localStorage.setItem("access_granted","true");
    localStorage.setItem("guest_name", valid.name);
    window.location.href = "invi.html";
  }else{
    error.style.display = "block";
  }
}
</script>

</body>
</html>
